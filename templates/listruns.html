{% extends "base.html" %}

{% block content %}

<script type="text/javascript">
  document.getElementById("nav-"
  + {% if user.username == username %}"username"{% else %}"runners"{% endif %}
  ).setAttribute("class", "active");
</script>

<h1>{{username}}</h1>
<a href="/runner/{{username_code}}">View PBs</a>
<table class="table table-striped">
  <thead>
    <tr>
      <th class="hidden-xs"></th>
      <th>Game</th>
      <th>Category</th>
      <th>Time</th>
      <th>Version</th>
      <th>Date</th>
      {% if user.username == username %}<th></th>{% endif %}
    </tr>
  </thead>
  <tbody>
    {% for run in runlist %}
    <tr>
      <td class="hidden-xs">
	<center>
	  <a href="/game/{{run['game_code']}}">
	    <img id="img-{{loop.index}}" alt="" class="img-responsive" 
		 style="max-height: 22px;">
	  </a>
	</center>
      </td>
      <td><a href="/game/{{run['game_code']}}">{{run['game']}}</a></td>
      <td>{{run['category']}}</td>
      <td>
	{% if run['video'] %}<a href="{{run['video']}}">{% endif %}
	  {{run['time']}}{% if run['video'] %}</a>{% endif %}      
      </td>
      <td>{% if run['version'] %}{{run['version']}}{% else %}-{% endif %}</td>
      <td>{{run['date']}}</td>
      {% if user.username == username %}
      <td><a href="/submit?edit={{run['run_id']}}">edit</a> | 
      <a href="/delete/{{run['run_id']}}">delete</a></td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Add game images when they exist -->
<script src="/static/js/util.js"></script>
<script type="text/javascript">
  {% for run in runlist %}
  set_img_if_exists( "img-{{loop.index}}", "{{run['game_code']}}" );
  {% endfor %}
</script>

{% endblock %}
