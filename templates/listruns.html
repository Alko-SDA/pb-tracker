{% extends "runnerpage_base.html" %}

{% block runner_content %}

<a href="/runner/{{username_code}}">View PBs</a>
<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th class="hidden-xs"></th>
      <th><i class="icon-gamepad icon-large"></i> Game</th>
      <th><i class="icon-compass icon-large"></i> Category</th>
      <th><i class="icon-time icon-large"></i> Time</th>
      <th><i class="icon-desktop icon-large"></i> Version</th>
      <th><i class="icon-calendar icon-large"></i> Date</th>
      {% if user.username == runner.username %}<th></th>{% endif %}
    </tr>
  </thead>
  <tbody>
    {% for run in runlist %}
    <tr>
      <td class="hidden-xs">
	<center>
	  <a href="/game/{{run['game_code']}}">
	    <img alt="" class="img-responsive lazy" style="max-height: 22px;"
		 src="/static/boxart/__blank-pixel__.png"
		 data-original="/static/boxart/{{run['game_code']}}.jpg">
	  </a>
	</center>
      </td>
      <td><a href="/game/{{run['game_code']}}">{{run['game']}}</a></td>
      <td>{{run['category']}}</td>
      <td>
	{% if run['video'] %}<a href="{{run['video']}}">{% endif %}
	  {{run['time']}}{% if run['video'] %}</a>{% endif %}
	{% if run['notes'] %}
	<a data-toggle="popover" data-content="{{run['notes']}}" href="#"
	   data-original-title 
	   title><i class="icon-comment"></i>{% endif %}
      </td>
      <td>{% if run['version'] %}{{run['version']}}{% else %}-{% endif %}</td>
      <td>{% if run['date'] %}{{run['date'].strftime( "%a %b %d %Y" )}}{% else %}-{% endif %}</td>
      {% if user.username == runner.username %}
      <td>
	<a href="/submit?edit={{run['run_id']}}"><i class="icon-edit icon-large"></i></a>  
      <a href="/delete/{{run['run_id']}}"><i class="icon-trash icon-large"></i></a></td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}

<!-- Total hack to get the query string in the return urls -->
{% block query_string_1 %}?q=view-all{% endblock %}
{% block query_string_2 %}?q=view-all{% endblock %}

{% block runner_js %}
$( "[data-toggle=popover]" ).popover( );
{% endblock %}
