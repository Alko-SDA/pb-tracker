{% extends "base.html" %}

{% block content %}

<script type="text/javascript">
  document.getElementById("nav-login").setAttribute("class", "active");
</script>

<form method="post" class="form-horizontal" role="form">
  <div class="form-group{% if user_error %} has-error{% endif %}">
    <label for="username" class="col-lg-4 col-md-4 control-label">
      Username
    </label>
    <div class="col-lg-4 col-md-4">
      <input type="text" class="form-control" name="username" 
	     placeholder="" value="{{username}}" autofocus>
    </div>
    <div class="col-lg-4 col-md-4 error">{{user_error}}</div>
  </div>
  <div class="form-group{% if pass_error %} has-error{% endif %}">
    <label for="password" class="col-lg-4 col-md-4 control-label">
      Password
    </label>
    <div class="col-lg-4 col-md-4">
      <input type="password" class="form-control" name="password" 
	     placeholder="" value="">
    </div>
    <div class="col-lg-4 col-md-4 error">{{pass_error}}</div>
  </div>
  <div class="form-group">
    <div class="col-lg-offset-4 col-md-offset-4 col-lg-4 col-md-4">
      <button id="submit-btn" class="btn btn-lg btn-primary" type="submit"
	      data-loading-text="<i class='icon-refresh icon-spin 
				 icon-large'></i> Logging in">
	 <i class="icon-signin icon-large"></i> Log in
      </button>
    </div>
  </div>
</form>
<center>
  <p class="lead">New user?  Then 
    <a href="/signup?from={{return_url}}">sign up</a>.
  </p>
</center>

{% endblock %}

{% block js %}
<script src="/static/js/util.js"></script>
<script type="text/javascript">
  /* Disable button on submit to avoid double submissions */
  block_double_submit( '#submit-btn' );
  set_nav_return_urls( "{{return_url}}", false );
</script>
{% endblock %}
